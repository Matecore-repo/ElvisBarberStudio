import { NextRequest, NextResponse } from "next/server"\nimport { neon } from "@neondatabase/serverless"\n\nexport async function GET(request: NextRequest) {\n  try {\n    const sql = neon(process.env.DATABASE_URL!)\n    \n    // Obtener ventas del dia actual\n    const sales = await sql(`\n      SELECT \n        s.id,\n        s.date_time,\n        s.payment_method,\n        s.total_amount,\n        s.services_text,\n        s.notes,\n        c.name as customer_name,\n        st.name as staff_name\n      FROM sales s\n      LEFT JOIN customers c ON s.customer_id = c.id\n      LEFT JOIN staff st ON s.staff_id = st.id\n      WHERE DATE(s.date_time) = CURRENT_DATE\n      ORDER BY s.date_time DESC\n    `)\n    \n    return NextResponse.json(sales)\n  } catch (error) {\n    console.error("Error fetching sales:", error)\n    return NextResponse.json({ error: "Error al obtener ventas" }, { status: 500 })\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const sql = neon(process.env.DATABASE_URL!)\n    const body = await request.json()\n    \n    const { customerId, staffId, paymentMethod, totalAmount, servicesText, notes } = body\n    \n    const result = await sql(`\n      INSERT INTO sales (customer_id, staff_id, payment_method, total_amount, services_text, notes)\n      VALUES ($1, $2, $3, $4, $5, $6)\n      RETURNING *\n    `, [customerId, staffId, paymentMethod, totalAmount, servicesText, notes])\n    \n    return NextResponse.json(result[0])\n  } catch (error) {\n    console.error("Error creating sale:", error)\n    return NextResponse.json({ error: "Error al crear venta" }, { status: 500 })\n  }\n}
