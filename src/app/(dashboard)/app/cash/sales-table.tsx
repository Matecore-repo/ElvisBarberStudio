"use client"\n\nimport { useState, useEffect } from "react"\nimport { \n  Table,\n  TableBody,\n  TableCaption,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from "@/components/ui/table"\n\ninterface Sale {\n  id: string\n  date_time: string\n  payment_method: string\n  total_amount: string\n  services_text: string\n  notes: string\n  customer_name: string\n  staff_name: string\n}\n\nexport function SalesTable() {\n  const [sales, setSales] = useState<Sale[]>([])\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    fetchSales()\n  }, [])\n\n  const fetchSales = async () => {\n    try {\n      const response = await fetch("/api/sales")\n      const data = await response.json()\n      setSales(data)\n    } catch (error) {\n      console.error("Error fetching sales:", error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const formatTime = (dateTime: string) => {\n    return new Date(dateTime).toLocaleTimeString("es-AR", { \n      hour: "2-digit", \n      minute: "2-digit" \n    })\n  }\n\n  if (loading) {\n    return <div className="text-center py-4">Cargando ventas...</div>\n  }\n\n  if (sales.length === 0) {\n    return <div className="text-center py-4 text-gray-500">No hay ventas registradas hoy</div>\n  }\n\n  return (\n    <Table className="bg-white rounded-lg shadow">\n      <TableCaption>Atenciones del dia de hoy</TableCaption>\n      <TableHeader>\n        <TableRow>\n          <TableHead className="w-[80px]">Hora</TableHead>\n          <TableHead>Cliente</TableHead>\n          <TableHead>Servicios</TableHead>\n          <TableHead className="text-right">Monto</TableHead>\n          <TableHead>Metodo</TableHead>\n          <TableHead>Barbero</TableHead>\n        </TableRow>\n      </TableHeader>\n      <TableBody>\n        {sales.map((sale) => (\n          <TableRow key={sale.id}>\n            <TableCell className="font-medium">{formatTime(sale.date_time)}</TableCell>\n            <TableCell>{sale.customer_name || "Cliente"}</TableCell>\n            <TableCell>{sale.services_text || "Servicio"}</TableCell>\n            <TableCell className="text-right font-semibold">\n              ${Number(sale.total_amount).toLocaleString()}\n            </TableCell>\n            <TableCell>\n              <span className={`px-2 py-1 rounded-full text-xs font-medium ${\n                sale.payment_method === "cash" \n                  ? "bg-green-100 text-green-800" \n                  : "bg-blue-100 text-blue-800"\n              }`}>\n                {sale.payment_method === "cash" ? "Efectivo" : "MP"}\n              </span>\n            </TableCell>\n            <TableCell>{sale.staff_name}</TableCell>\n          </TableRow>\n        ))}\n      </TableBody>\n    </Table>\n  )\n}
